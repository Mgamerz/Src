/**
 *      DG_PauseMenu
 *
 *      Creation date: 03/07/2011 20:10
 *      Copyright 2011, Jimmy
 */
class LF_PauseMenu extends GFxMoviePlayer;
 
var GFxObject RootMC;
var GFxClikWidget ResumeButton;
var GFxClikWidget RestartButton;
var GFxClikWidget ExitButton;
 
//GFx framework always runs this function first
function bool Start(optional bool StartPaused = false)
{
        super.Start();
        Advance(0);
       
        RootMC = GetVariableObject("_root");
        `log("RootMC = "$RootMC);
       
        AddCaptureKey('XboxTypeS_A');
        AddCaptureKey('XboxTypeS_Start');
        AddCaptureKey('Enter');
       
        return true;
}
 
/* FUNC: WidgetInitialized
** DESC: Callback when a CLIK ewidget with enableInitCallback set to TRUE is initialized.
**              Use only if trying to make calls from code.  fscommands through Kismet are preferred for ease of use.
** ARGS: WidgetName [name of flash instance], WidgetPath [path from root of flash file], Widget [ref to GFxObject]
** RETURN: True if widget was handled, false otherwise
*/
event bool WidgetInitialized(name WidgetName, name WidgetPath, GFxObject Widget)
{
        switch(WidgetName)
        {
                case ('btn_resume'):
                        ResumeButton = GFxClikWidget(Widget);
                        ResumeButton.AddEventListener('CLIK_press', ResumePressed);
                        break;
                case ('btn_restart'):
                        RestartButton = GFxClikWidget(Widget);
                        //RestartButton.AddEventListener('Clik_press', RestartLevel);
                        break;
                case ('btn_exit'):
                        ExitButton = GFxClikWidget(Widget);
                        ExitButton.AddEventListener('Clik_press', MainMenu);
                        break;
                default:
                        break;
        }
        return true;
}
 
/* FUNC: StartGamePressed
** DESC: Executed through StartGameButton event listener, opens game map to play
** ARGS: ev [EventListener event data, sent just like ActionScript via Event Listener]
** RETURN: none
*/
function ResumePressed(GFxClikWidget.EventData ev)
{
        GD2HUD(GetPC().MyHUD).CompletePauseMenuClose();
}
 
 
function MainMenu(GFxClikWidget.EventData ev)
{
        ConsoleCommand("open MainMenu");
}
 
function CloseMovie()
{
        RootMC.GoToAndPlay("close");
}
 
defaultproperties
{
        //each widget acted upon in code should be bound to its correct class type
        WidgetBindings.Add((WidgetName="btn_resume", WidgetClass=class'GFxClikWidget'))
        WidgetBindings.Add((WidgetName="btn_restart", WidgetClass=class'GFxClikWidget'))
        WidgetBindings.Add((WidgetName="btn_exit", WidgetClass=class'GFxClikWidget'))
       
        bEnableGammaCorrection=FALSE
        bPauseGameWhileActive=TRUE
        bCaptureInput=true
}
 